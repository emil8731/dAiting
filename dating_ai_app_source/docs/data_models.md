# Dating App AI Assistant - Data Models

## Overview
This document defines the data models and storage approach for the Dating App AI Assistant. These models will be used to store and manage data throughout the application.

## Data Models

### 1. User Model
Represents the application user.

```python
class User:
    id: str                  # Unique identifier
    email: str               # User email
    password_hash: str       # Hashed password
    created_at: datetime     # Account creation timestamp
    tinder_credentials: Dict # Tinder authentication credentials
    hinge_credentials: Dict  # Hinge authentication credentials
    settings: Dict           # User preferences and settings
```

### 2. Match Model
Represents a match from a dating platform.

```python
class Match:
    id: str                  # Unique identifier
    platform: str            # "tinder" or "hinge"
    platform_id: str         # ID from the original platform
    user_id: str             # Reference to user
    name: str                # Match name
    age: int                 # Match age
    bio: str                 # Match biography/about
    interests: List[str]     # Match interests
    photos: List[Dict]       # Match photos (URLs and metadata)
    job: Dict                # Job information
    education: Dict          # Education information
    location: Dict           # Location information
    instagram: Dict          # Connected Instagram data (if available)
    last_updated: datetime   # Last profile update timestamp
    is_active: bool          # Whether match is still active
```

### 3. Conversation Model
Represents a conversation with a match.

```python
class Conversation:
    id: str                  # Unique identifier
    match_id: str            # Reference to match
    user_id: str             # Reference to user
    platform: str            # "tinder" or "hinge"
    platform_id: str         # ID from the original platform
    started_at: datetime     # Conversation start timestamp
    last_message_at: datetime # Last message timestamp
    status: str              # "active", "inactive", "archived"
    ai_enabled: bool         # Whether AI assistance is enabled
    message_count: int       # Total message count
```

### 4. Message Model
Represents a single message in a conversation.

```python
class Message:
    id: str                  # Unique identifier
    conversation_id: str     # Reference to conversation
    sender_type: str         # "user", "match", or "ai"
    content: str             # Message content
    sent_at: datetime        # Timestamp when sent
    delivered_at: datetime   # Timestamp when delivered
    read_at: datetime        # Timestamp when read
    ai_generated: bool       # Whether generated by AI
    ai_approved: bool        # Whether approved by user (if AI-generated)
    platform_id: str         # ID from the original platform
```

### 5. MessageTemplate Model
Represents a template for AI-generated messages.

```python
class MessageTemplate:
    id: str                  # Unique identifier
    category: str            # Template category (e.g., "opener", "follow-up")
    content: str             # Template content with placeholders
    context_requirements: Dict # Required context for template use
    created_at: datetime     # Creation timestamp
    success_rate: float      # Historical success rate
    usage_count: int         # Number of times used
```

### 6. ProfileAnalysis Model
Represents analysis of a match profile.

```python
class ProfileAnalysis:
    id: str                  # Unique identifier
    match_id: str            # Reference to match
    topics: List[Dict]       # Potential conversation topics with scores
    hooks: List[Dict]        # Identified conversation hooks
    tone: str                # Recommended conversation tone
    interests_score: Dict    # Scored interests by relevance
    created_at: datetime     # Analysis timestamp
    updated_at: datetime     # Last update timestamp
```

### 7. ConversationContext Model
Represents the context of an ongoing conversation.

```python
class ConversationContext:
    id: str                  # Unique identifier
    conversation_id: str     # Reference to conversation
    current_topics: List[str] # Currently active topics
    discussed_topics: List[str] # Previously discussed topics
    sentiment_history: List[Dict] # History of conversation sentiment
    engagement_level: float  # Current engagement level
    next_actions: List[str]  # Recommended next actions
    updated_at: datetime     # Last update timestamp
```

## Database Schema

The application will use SQLite for development and PostgreSQL for production. The schema will include the following tables:

1. `users` - Stores user information and credentials
2. `matches` - Stores match profiles from dating platforms
3. `conversations` - Stores conversation metadata
4. `messages` - Stores individual messages
5. `message_templates` - Stores templates for message generation
6. `profile_analyses` - Stores analysis of match profiles
7. `conversation_contexts` - Stores conversation context information

## Data Storage Approach

### Local Storage
- SQLite database for development
- JSON files for configuration and temporary data
- Encrypted storage for authentication tokens

### Production Storage
- PostgreSQL database for relational data
- Redis for caching and session management
- Encrypted file storage for sensitive information

## Data Lifecycle Management

1. **Data Collection**:
   - Profile data collected from dating platforms
   - Message history retrieved and stored
   - User preferences and settings saved

2. **Data Processing**:
   - Profile data analyzed for conversation hooks
   - Message history processed for context
   - Templates selected based on profile analysis

3. **Data Retention**:
   - User-configurable retention periods
   - Option to delete data on demand
   - Automatic archiving of inactive conversations

4. **Data Security**:
   - Encryption for sensitive data
   - Access controls for user data
   - Secure handling of authentication tokens

## Data Migration Strategy

The application will support data migration through:
- Database versioning
- Schema migration scripts
- Data export/import functionality
- Backup and restore capabilities
